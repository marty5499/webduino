<!DOCTYPE html>
<html>

<head>
  <script src="../bower_components/webcomponentsjs/webcomponents.min.js">
  </script>
  <link rel="import" href="../bower_components/wa-max7219/wa-max7219-led.html">
  <style>
  body {
    user-select: none;
    -webkit-user-select: none;
  }
  ;
  </style>
</head>

<body>
  <div id='hex' style="font-size:32px">0000000000000000</div>
  <br>
  <div id='a'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='b'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='c'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='d'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='e'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='f'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='g'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>
  <div id='h'>
    <wa-max7219-led id='X128'></wa-max7219-led>
    <wa-max7219-led id='X64'></wa-max7219-led>
    <wa-max7219-led id='X32'></wa-max7219-led>
    <wa-max7219-led id='X16'></wa-max7219-led>
    <wa-max7219-led id='X8'></wa-max7219-led>
    <wa-max7219-led id='X4'></wa-max7219-led>
    <wa-max7219-led id='X2'></wa-max7219-led>
    <wa-max7219-led id='X1'></wa-max7219-led>
    <span style='font-size:24px'>00</span>
  </div>

  <script>
  var info = {
    a: 0,
    b: 0,
    c: 0,
    d: 0,
    e: 0,
    f: 0,
    g: 0,
    h: 0
  };

  function updateText() {
    var str = '';
    var q = document.querySelectorAll('span');
    for (var i = 0; i < q.length; i++) {
      str += q[i].innerHTML;
    }
    hex.innerHTML = str;
  }


  function cal(msg) {
    key = this.id;
    val = parseInt(msg.detail.id.substring(1));
    state = msg.detail.state;
    var nowVal = info[key];
    info[key] = state == 'on' ? nowVal + val : nowVal - val;
    if (info[key] < 0) info[key] = info[key] + 255;
    var showText = info[key].toString(16);
    if (info[key] < 16) showText = '0' + showText;
    this.lastElementChild.innerHTML = showText;
    updateText();
  }

  a.addEventListener("state", cal);
  b.addEventListener("state", cal);
  c.addEventListener("state", cal);
  d.addEventListener("state", cal);
  e.addEventListener("state", cal);
  f.addEventListener("state", cal);
  g.addEventListener("state", cal);
  h.addEventListener("state", cal);
  </script>
</body>

</html>